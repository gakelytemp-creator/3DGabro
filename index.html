<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3DGabro - Sovereign Engineering Suite</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; display: flex; font-family: 'Consolas', 'Monaco', monospace; background: #000; }

        /* მარცხენა პანელი (Tools) */
        #left-panel { width: 260px; height: 100vh; background: #111; border-right: 1px solid #333; display: flex; flex-direction: column; padding: 15px; box-sizing: border-box; }

        /* ცენტრალური სივრცე */
        #canvas-container { flex-grow: 1; height: 100vh; position: relative; }

        /* მარჯვენა პანელი (Terminal) */
        #right-panel { width: 320px; height: 100vh; background: #0a0a0a; border-left: 1px solid #333; display: flex; flex-direction: column; padding: 10px; box-sizing: border-box; }

        .section-title { font-size: 10px; color: #00ff00; text-transform: uppercase; margin: 15px 0 5px 0; opacity: 0.6; }
        
        .tool-btn { background: #1a1a1a; border: 1px solid #333; color: #aaa; padding: 10px; margin-bottom: 5px; cursor: pointer; text-align: left; transition: 0.2s; font-size: 12px; }
        .tool-btn:hover { background: #222; border-color: #00ff00; color: #fff; }

        /* ტერმინალის სტილი */
        #terminal { flex-grow: 1; background: #000; color: #00ff00; padding: 10px; font-size: 11px; overflow-y: auto; border: 1px solid #222; line-height: 1.4; text-shadow: 0 0 5px rgba(0,255,0,0.3); }
        .term-entry { margin-bottom: 4px; border-left: 2px solid #004400; padding-left: 5px; }
        .term-warn { color: #ffaa00; }

        input[type=range] { width: 100%; accent-color: #00ff00; margin-bottom: 15px; }
    </style>
</head>
<body>

    <div id="left-panel">
        <h3 style="color: #00ff00; margin: 0 0 20px 0;">3DGABRO v0.1</h3>
        
        <div class="section-title">Discretization</div>
        <input type="range" min="4" max="128" value="32" id="res-slider">
        
        <div class="section-title">Core Operations</div>
        <button class="tool-btn" onclick="logToTerminal('Initializing Voxel Synthesis...')">1. Voxelize Cloud</button>
        <button class="tool-btn" onclick="runMatch()">2. Pattern Match</button>
        <button class="tool-btn" onclick="logToTerminal('Serializing to .gabro...', 'warn')">3. Export Sovereign</button>
    </div>

    <div id="canvas-container"></div>

    <div id="right-panel">
        <div class="section-title">Stream Analytics</div>
        <div id="terminal">
            <div class="term-entry">> System Boot Sequence... Complete.</div>
            <div class="term-entry">> Waiting for Geometry Injection...</div>
        </div>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js';

        const container = document.getElementById('canvas-container');
        const terminal = document.getElementById('terminal');

        // Global Logging Function
        window.logToTerminal = function(msg, type = 'info') {
            const entry = document.createElement('div');
            entry.className = type === 'warn' ? 'term-entry term-warn' : 'term-entry';
            entry.innerHTML = `> [${new Date().toLocaleTimeString()}] ${msg}`;
            terminal.appendChild(entry);
            terminal.scrollTop = terminal.scrollHeight;
        }

        window.runMatch = function() {
            logToTerminal("Starting Probability Match...");
            setTimeout(() => logToTerminal("Analyzing Euclidean distances...", "info"), 500);
            setTimeout(() => logToTerminal("Pattern found: 92.4% Match to 'M20_Bolt'", "info"), 1200);
        }

        // Three.js Standard Setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
        camera.position.set(12, 12, 12);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        scene.add(new THREE.GridHelper(20, 20, 0x222222, 0x111111));
        const controls = new OrbitControls(camera, renderer.domElement);

        // Placeholder for our Normalized Object
        const box = new THREE.Mesh(new THREE.BoxGeometry(4, 4, 4), new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe: true}));
        scene.add(box);

        function animate() {
            requestAnimationFrame(animate);
            box.rotation.y += 0.001;
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>